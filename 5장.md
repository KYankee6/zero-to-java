# 5. 참조 타입
![image](https://user-images.githubusercontent.com/42092864/161592527-744dd59f-b7d4-4322-953c-8468bdc4fe89.png)


## 5.1 데이터 타입 분류
자바의 데이터 타입에는 크게 두가지가 존재한다.

- `기본 타입`(primitive)  
  
    `기본 타입`은 여태까지 보아왔던 (정수, 실수, 문자, 논리 리터럴)을 저장한다.        
- `참조 타입`(referecne)  
  
    `참조 타입`은 객체의 번지를 참조하는 타입으로 `배열`, `열거`, `클래스`, `인터페이스` 타입을 말한다.  


`기본 타입`과 `참조 타입`은 변수가 **어떤 값을 저장하느냐?** 에서 차이가 있다.  
`기본 타입`은 **실제 값**을 변수에 저장하지만,  
`참조 타입`은 **메모리의 번지**를 값으로 갖는다.  

![image](https://user-images.githubusercontent.com/42092864/161594768-36003fea-a5b4-4972-b93f-0d387351af0b.png)  
age와 price는 `기본 타입`이므로 직접 값을 저장하지만, String 클래스 변수인 name, hobby는 `힙` 영역의 객체 주소값을 가르키고 있다.  
여기서 String 클래스 변수를 `참조 타입 변수`라고 한다.  


## 5.2 메모리 사용 영역
![image](https://user-images.githubusercontent.com/42092864/161595316-4a99d9cc-ba06-4b84-bd97-40fdde983139.png)  

시작하기전, JVM은 OS에서 할당 받은 메모리를 세 영역으로 구분한다.  

메소드 영역(Method Area), 힙 영역(Heap Area), JVM 스택 영역 (Stack Area)  



### 5.2.1 메소드(Method) 영역  
- 메소드 영역에는 코드에서 사용되는 클래스(~.class)를 클래스 로더로 읽는다.  
- 클래스별로 데이터, 코드 등을 분류해서 정리하는데 아래와 같다.  
- 런타임 상수풀, 필드(field) 데이터, 메소드 (method) 데이터, 메소드 커드, 생성자(constructor)  
- 메소드 영역은 JVM이 시작할 때 생성되고 **모든 스레드가 공유하는 영역**이다.  
  
> Q. 메소드 영역을 모든 스레드가 공유한다는 것이 어떤 의미를 가질까?  
  
  
  
  
### 5.2.2 힙(Heap) 영역
- 힙 영역은 객체와 배열이 생성된다.
- 객체와 배열은 **JVM 스택 영역**의 변수나 다른 객체의 필드에서 참조한다.
- 참조하는 변수나 필드가 없다면 JVM은 가비지 컬렉터를 실행시켜 쓰레기 객체를 제거한다.
- **자바는 코드로 객체를 직접 제거시키는 방법을 제공하지 않는다**
![image](https://user-images.githubusercontent.com/42092864/161597119-658be976-f823-4cc4-9881-c8be600c4fbd.png)  


### 5.2.3 JVM 스택(Stack) 영역
- JVM 스택 영역은 각 스레드마다 하나씩 존재하며 스레드가 시작될 때 할당된다. (따로 추가해주지 않을시 main 1개)  
- JVM 스택은 메소드를 호출할 때 마다 프레임(Frame)을 추가(Push)하고 메소드가 종료되면 프레임을 제거(Pop)한다.  
- 예외 발생시 나오는 printStackTrace() 메소드로 보여주는 Stack Trace의 각 라인은 하나의 프레임을 표현한다.  
- 프레임 내부에는 로컬 변수 스택이 있고, 기본 타입 변수와 참조 타입 변수가 추가(push) 되거나 제거(pop) 된다.  
- 변수가 생성되는 시점은 초기화 될때, 즉 값이 저장될 때 이다.  
- 변수는 선언된 블록(Scope)안에서만 존재하고 블록을 벗어나면 스택에서 제거된다.  
  
  
(다시한번) 기본타입 변수는 값을 저장하는 스택 영역에 있지만, 참조 변수는 값이 아니라 힙/메소드 영역의 객체 주소를 가진다.  

## 5.3 참조 변수의 ==, != 연산
[3장](https://url.kr/ipc3bu) 에서 언급하였듯이, 참조 타입 변수끼리 비교를 한다는 것은 `주소값`을 비교하는 것이다.
따라서 동일 객체를 참조하고 있을 경우에는 `true`, 아니라면 `false`를 반환한다.
